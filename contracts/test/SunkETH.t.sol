pragma solidity >=0.8.25;

import "forge-std/Test.sol";


import "forge-std/console.sol";

import "../SunkETH.sol";
import "../plonk_vk-nullifierTest.sol";



contract SunkETHTest is Test { 
    SunkETH public sunkETH;
    UltraVerifier public ultraVerifier;
    //bytes32[] public nullifier;
    bytes32 public nullifier;

    function setUp() public {
        ultraVerifier = new UltraVerifier();
        sunkETH = new SunkETH(address(ultraVerifier));

    }

    function test_remint() public {
        //uint256 wad = 1000000000; 


        //nullifier = [bytes32(0x00000000000000000000000000000000000000000000000000000000000000d1),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000fd),bytes32( 0x000000000000000000000000000000000000000000000000000000000000004c),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000098),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000c3),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000e4),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000005),bytes32( 0x000000000000000000000000000000000000000000000000000000000000004e),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000033),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000081),bytes32( 0x000000000000000000000000000000000000000000000000000000000000008d),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000072),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000075),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000069),bytes32( 0x000000000000000000000000000000000000000000000000000000000000004c),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000068),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000081),bytes32( 0x000000000000000000000000000000000000000000000000000000000000007c),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000e6),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000da),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000c6),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000fe),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000078),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000081),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000029),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000f5),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000ad),bytes32( 0x000000000000000000000000000000000000000000000000000000000000001d),bytes32( 0x0000000000000000000000000000000000000000000000000000000000000046),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000fa),bytes32( 0x00000000000000000000000000000000000000000000000000000000000000d3),bytes32( 0x000000000000000000000000000000000000000000000000000000000000008a)];
        //bytes memory blockHeaderRLP = bytes("0xf90260a0c325f46f1d1c5fe234b55265382cefbedfab059ac1ff091d9d602ebeab4db44ea01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347940000000000000000000000000000000000000000a0973ef8145a288ec2ed6094026556a46071197a9b62f6ba4c3bf0a3c9cd726f6ca0a724bf52ecaa221b8293c26383b2119546e8807073e8b44c1b2bd7c38267404fa0493acf3de2709e454b35097e1775f8a437394b0540c81895853c8e08b42bb5e7b901002a150016800060014510026288000040020028000020002040a0210020800402010010021008082004040142802c10c2482001208d2010800200101d1029802110c21042100600205100090b020110080403905010100018000210180002000004030005024060000306000000188890002a11e00021808102008010007002446e0000040c1808b02c208008046208100801082010200800204140839c404280121a800824022102000421068000061011a420900400010008928102000200000000086280090000808040010962800509b88402006400011410802090056000103001020002002c800040006010080401401020081800054111008000030402808356d9de8401c9c38083368af484661afd0099d883010d0d846765746888676f312e32302e34856c696e7578a0f0e1af035c64b15470ef80a7a37c9ba137c5d1405456ccd0e9e0a06f6129c96988000000000000000083068f36a043012561115448ba590c49959e53308ba3c830ab74cc77da42e90180ec3a3df8808404bc0000a0195929971fea9174d8d3a7c114de785333d1048e7830c9997b0d5bcf4d29746b");
        //sunkETH.remint(wad, nullifier, blockHeaderRLP, snarkProof);

        bytes memory snarkProof = abi.encodePacked(hex"254c1f10f96236600d19a99b99046d9d825621423dedc20619e8cf502cbdd6461ce52ad10333ff5b5b6be42659a78d24d7ff89df3d1c2a1bed493465be3dc89323119524428fe36d7ad96e1bc94bc80842c36196e443167ce3a6b36dc56f2b1a296a71c3de1ce78517471fa1e498d5fd6a6ada16e91ca5b6bc37ce05e6629bf915a36415cf7e981ef49537c45383f9b24c99fdf22510b4267d358bd36b6b149e1b34ef75b35b0c66e35d89733aceb92cc5ac27cc0e289776574f0775cb0a621820ed18f543c566e94cf73ca4c06c91b8b4ce185ac6ed4441b9216bd60a47c2c219675041a2028fa4909fe6097ae7ac7ae426a067a31e0334cd634d694ed11c1a086b49d2d3ae92dbcabf70456554a679fb52a4f0f985e7c974db2b040e8288680aff9898aeeb3d06b618244a22cecdc02d17f6237cb520c8c59621b6bf85a6031c338897ea8cdb7e0b3476f40c3d0120fa7c7b1d33f35b1f21b62aa14de610f918330d01f02b24f2e63d58f90f40950188d51af5886ce7979c8f51957f4d4e1d21f81c82519e1dbf15cc8496acf0dd1754b03084324a238b505a65b90b732d62248e2adc8699c47e465716ada8bea808a88f86e59aabd395fd50a1a0e0c0a07b1067cd642bff8a2287200671ab0dff96fac1be64b2a0d48357458a811d176c7e0e2fbd1b29c3881f74b3e4a93f109fd76ecc1e43852e003e7901dda855b22edf0f7581964add36d2a69b2ef88fee92cc72b573c67d1825ec251d1341e66bcf4825219d0aa021597e0871da6bac75471e8153ab72423b5d03af2c141eaac3ac362d2949e28f3495254288b438f940d3b34ae21ad483f6e6f6bdf40ee72dcdf84d07ef1c199a8bbd97a9b3cfda96fdef685058c593ba9f4af320abcf1a7bf98180018a4d9f314a04dda3518a3d73cdccdabcd77713785be55ed3ac0bf9ad8b2dbd04d4fd275ba5490114babc2f19c702da6430e9c0190e3056b5089f24d87b4adc1808ac76e99ec924e8286983ad3802233c9cfd5489b54c8b45f86ba716b511641f5a2adced397ec51de8c25351dec7f8904221f511c7486ee6c0e925d4334cae29db31fee676989606968cd705f6cf63ba6fc55910ce8a97cefde95c45718e9321c3bac08b6fd085d8ac0851176bcebf549014e9241220bee552ad1a335583c31ef40d86fe3643a2235adeabfea6d067881817c475b09b1b9ad371b97d40589f02ce3144c3fe44edb76bd52943ccf1ec24bc83ffb4647b73bf500c600ab671c20f8b773e2ab5b40e0211612723c1f402789fa664de0e3b700f93855c37f76bb3007dcba5c5a33f86674132c551260385132f49d81e76285737bf2a8b0d5434ec03e68ea4b79e7eb4956fb45e603faf476eb75f370d4da602f5f319a794ee44b4045ea3cb040fb0d806a28e14a1d036268f80d182a95d22cc90342232b7bb8881184582dcb81aa9805558e04c50132e2631686a5527a4df52865160ff44892c3b26dd360a2838713761e2221cac719cc12c085a8ca932ed4231648c8c8e78e7221497d3d46e86cee547c4fdad379ebf2e77288ab0ce4a36dd146761a518b7b902233480ea1d97dad4256b3bd6089b768dab42adac60f61d720f3d6ca08d79e0b1223b252b84b673ddaff38710afad66a46ec10fc01f47d2490bc523be9b6a7887267719e1fc61b0b4abc5f6bbd54a534f717025a326de0539d0abdb3d5f0feee2153b4f39d0c844446cf12c0dcfe0354b4fbadf06d8a4458de621a2e5fef542500d34873efbe4af55d425642d1da41da918c9d7a3d1192b06ac398cb27dc2dd8410de9e4e2c1bc310628f58c10c3b59e35dcbdcaec2855b45651a0f725bfd13b4181fa420c5ffb5b2d9ccc70effbed8d7264c6293aa15c5663c2e8cb0994e8e3e234f34d6b553806e833bade86a002ab239b15f42450946c6f29944b9d6961a601f30d44b9d61d6a0c5300be60088a6ee81df1bd10509e6fa5997ca5b842ca1cf17df898d93bf723ac19138462702d12cb6de523179ce51ad8b7d3882d0888ee0212146774d5da032b37ad97e03d857740b5e71a65760aff444f831742584ae251599b60d5b514bc9f98aa73c5a11edb71734cd3303f79eac22ac63a93812ab7214be5a9895f12ddf14985dab8f1e596b4c37801c4e89a62befd17fea483f606d2747a7bb57503a0789ee1637dc5d7cea0dcc85d9218cd986a69e9bc1c3d60a500a6628f257aa365e9707df7ff352af11e32ba8f79380bf9cfb7d55deb606703e2195286a26ea0e4bc3e2dcae9ca9b38da0021a76bc3a1d4927f54b3841b25d982bdfb828f3598305d0ba5ffafd22c6139be9da2f50a4b48d17c5cf0ce5be4aad0feb216b7da8e150f05ac2dcdc1503cb071553a94f73d63799b6c17468232bd71d9e10d968a8f551bc6bfa9fdd4d8580b3af40ef166c71a083bc1b605e285eef0c696efa86d83ca2dd7f49b65e279eee130f95dc538761c668cc04bad4aff336241cbebf370ceed4d658612f8ae63308f436abe891fae9c44e1ef66a8942f52b25ceaa78b113764d03e0d47fa6df552d98696980209d84188d9939c76d2a156905dadba1319acecdb921f85203a0976aaf936922be3b470bfa9478215962d66a25d6247730f0c9f1b2747b2c55992096c84ee3de2b68eac2f8940f7de794f5c2094c6c9724019820ab3ae245c836a47acfbc1679d1a9b6739b9e2fca54c0533c0c8197a1cebe2e9fa759b19d913622b1b477451493710541216ce4be9a63b7fb214e0429087638be8b3e20ee3b091aa528178adf372d9117415d580e259bec9907110f62b904c312744aff5f750c40e32bae4208033dab3f25f7afa29282f2412f206aedcd0953864d0cf930d1a747fddc3b7d5796aec8879a329a55616257dc2d0b417c6151713a4d43319f7cef18f1943e50dd4ae126d948798424155ba3ef2b8bf323c0af61736aa6f5fc3ddcabb3977b78f1240c5d53d19ef7ee6badfc99112fbe93ab396a89a2a3c8b510f70f1624879e2e660a408c9e62803568b4bb05");
        console.logBytes(snarkProof);
        nullifier =  ["0x00000000000000000000000000000000000000000000000000000000000000d1", "0x00000000000000000000000000000000000000000000000000000000000000fd", "0x000000000000000000000000000000000000000000000000000000000000004c", "0x0000000000000000000000000000000000000000000000000000000000000098", "0x00000000000000000000000000000000000000000000000000000000000000c3", "0x00000000000000000000000000000000000000000000000000000000000000e4", "0x0000000000000000000000000000000000000000000000000000000000000005", "0x000000000000000000000000000000000000000000000000000000000000004e", "0x0000000000000000000000000000000000000000000000000000000000000033", "0x0000000000000000000000000000000000000000000000000000000000000081", "0x000000000000000000000000000000000000000000000000000000000000008d", "0x0000000000000000000000000000000000000000000000000000000000000072", "0x0000000000000000000000000000000000000000000000000000000000000075", "0x0000000000000000000000000000000000000000000000000000000000000069", "0x000000000000000000000000000000000000000000000000000000000000004c", "0x0000000000000000000000000000000000000000000000000000000000000068", "0x0000000000000000000000000000000000000000000000000000000000000081", "0x000000000000000000000000000000000000000000000000000000000000007c", "0x00000000000000000000000000000000000000000000000000000000000000e6", "0x00000000000000000000000000000000000000000000000000000000000000da", "0x00000000000000000000000000000000000000000000000000000000000000c6", "0x00000000000000000000000000000000000000000000000000000000000000fe", "0x0000000000000000000000000000000000000000000000000000000000000078", "0x0000000000000000000000000000000000000000000000000000000000000081", "0x0000000000000000000000000000000000000000000000000000000000000029", "0x00000000000000000000000000000000000000000000000000000000000000f5", "0x00000000000000000000000000000000000000000000000000000000000000ad", "0x000000000000000000000000000000000000000000000000000000000000001d", "0x0000000000000000000000000000000000000000000000000000000000000046", "0x00000000000000000000000000000000000000000000000000000000000000fa", "0x00000000000000000000000000000000000000000000000000000000000000d3", "0x000000000000000000000000000000000000000000000000000000000000008a"]//hex"d1fd4c98c3e4054e33818d7275694c68817ce6dac6fe788129f5ad1d46fad38a";
        console.logBytes32(nullifier);
        bytes32[] memory publicInputs = new bytes32[](32);
        publicInputs[0] = nullifier;
        ultraVerifier.verify(snarkProof, publicInputs);

    }

    

}